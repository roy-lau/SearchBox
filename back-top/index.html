<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>back-top 回到顶部——JavaScript</title>
    <style>
    .box {
        width: 1190px;
        margin: 0 auto;
    }

    #btn-back-top {
        width: 40px;
        height: 40px;
        position: fixed;
        right: 2%;
        bottom: 50px;
        background: url(imgs/top_bg.png) no-repeat left top;
    }

    #btn-back-top:hover {
        background: url(imgs/top_bg.png) no-repeat left -40px;
    }
    </style>
</head>

<body>
    <div class="box"><img src="imgs/tb_bg.jpg" alt="淘宝背景"></div>
    <a href="javascript:;" id="btn-back-top" title="回到顶部"></a>
</body>
<script>
window.onload = function() {
    var obtn = document.getElementById('btn-back-top'),
        // 获取页面可视区域的高度
        clientHeight = document.documentElement.clientHeight;
    timer = null,
        isTop = true;
    // 页面发生滚动时触发
    window.onscroll = function() {
        // 获取滚动条距离顶部的高度
        var osTop = document.documentElement.scrollTop || document.body.scrollTop
        // 控制 回到顶部 按钮显示隐藏
        osTop >= clientHeight ?
            obtn.style.display = 'block' :
            obtn.style.display = 'none';
         // 判断滚动条是否在顶部
        !isTop ? clearInterval(timer) : isTop = false
    }
    // 点击回到顶部
    obtn.onclick = function() {
        // 设置定时器
        timer = setInterval(function() {
            // 获取滚动条距离顶部的高度
            var osTop = document.documentElement.scrollTop || document.body.scrollTop,
                ispeed = Math.floor(-osTop / 5);
            // 设置滚动条距离顶部的高度
            document.documentElement.scrollTop = document.body.scrollTop = osTop + ispeed;
            console.log(osTop, ispeed)
            isTop = true;
            if (osTop === 0) {
                clearInterval(timer); // 清除定时器
            }
        }, 30)
    }
}
</script>

</html>